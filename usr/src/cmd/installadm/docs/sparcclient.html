<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">

<!--     -->
<head>
<!-- GenHTML revision 23436-->
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>SPARC Client Installations - OpenSolaris 2010.03 Automated Installer Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2010-03-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/opensol.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.com"><img border="0" src="graphics/opensolaris_logo_trans.png"></img></a>
   </div>
   <div class="Title">OpenSolaris 2010.03 Automated Installer Guide</div>
</div>
<div class="headerbar"></div>


<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="clientreq.html">Previous</a>
             </td>
             <td align="right">
                 <a href="x86client.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="index.html">1.&nbsp;&nbsp;What's New For Automated Installations</a></p>
<p class="toc level1 tocsp"><a href="intro.html">2.&nbsp;&nbsp;Introduction to the Automated Installer</a></p>
<p class="toc level1 tocsp"><a href="tasks.html">3.&nbsp;&nbsp;Automated Network Install Task Map</a></p>
<p class="toc level1 tocsp"><a href="bootable.html">4.&nbsp;&nbsp;Automated Installations That Boot From Media</a></p>
<p class="toc level1 tocsp"><a href="setup.html">5.&nbsp;&nbsp;Set up an Automated Install Server</a></p>
<p class="toc level1 tocsp"><a href="administer.html">6.&nbsp;&nbsp;How to Administer an Automated Install Server</a></p>
<p class="toc level1 tocsp"><a href="client.html">7.&nbsp;&nbsp;How to Administer a Custom Install Client</a></p>
<p class="toc level1 tocsp"><a href="manifest.html">8.&nbsp;&nbsp;How to Administer Manifest Files</a></p>
<p class="toc level1 tocsp"><a href="clients.html">9.&nbsp;&nbsp;How to Manage Client Installations</a></p>
<p class="toc level2"><a href="clientreq.html">Client System Requirements</a></p>
<div id="scrolltoc" class="onpage">
<p class="toc level2"><a href="">SPARC Client Installations</a></p>
</div>
<p class="toc level2"><a href="x86client.html">x86 Client Installations</a></p>
<p class="toc level2"><a href="bothclient.html">SPARC and x86 Client Installation Messages and Errors</a></p>
<p class="toc level1 tocsp"><a href="trouble.html">10.&nbsp;&nbsp;Troubleshooting and FAQs for the Automated Installer</a></p>
<p class="toc level1 tocsp"><a href="appendix.html">11.&nbsp;&nbsp;Appendix</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="sparcclient"></a><h3>SPARC Client Installations</h3>
<p>Review the following information about SPARC client installations:</p>
<ul><li><p><a href="#sparcboot">What Happens During the SPARC Client Network Boot Sequence?</a></p></li>
<li><p><a href="#sparcsee">What Should I See During the SPARC Network Boot Sequence?</a></p></li>
<li><p><a href="#sparcerr">SPARC Network Booting Errors and Possible Causes</a></p></li></ul>


<a name="sparcboot"></a><h4>What Happens During the SPARC Client Network Boot Sequence?</h4>
<p>Boot the client from the network. For SPARC clients, at the open
boot prompt, type:</p><pre>OK <tt>boot net:dhcp - install</tt></pre><p>The technical details of what occurs during the automated installer (AI) boot of
a SPARC client are as follows:</p>
<ol><li><p>The client boots and gets IP address and the bootfile, <tt>wanboot-cgi</tt>, from the DHCP server.</p></li>
<li><p><tt>wanboot-cgi</tt> reads <tt>wanboot.conf</tt> and sends the location of the WAN Boot binary to the client.</p></li>
<li><p>The WAN Boot binary is downloaded using HTTP, and the client boots the WAN Boot program.</p></li>
<li><p>WAN Boot gets the <tt>boot_archive</tt> file, and Solaris is booted.</p></li>
<li><p>Image archives, <tt>solaris.zlib</tt> and <tt>solarismisc.zlib</tt>, are downloaded using HTTP.</p></li>
<li><p>The AI SMF service uses multicast DNS (mDNS) to contact the HTTP server and get the AI manifest.</p></li>
<li><p>The AI install program is invoked with the AI manifest to perform the installation of the OpenSolaris OS to the client.</p></li></ol>


<a name="sparcsee"></a><h4>What Should I See During the SPARC Network Boot Sequence?</h4>
<p>The SPARC client installation is initiated by typing at the open boot prompt:</p><pre>OK <tt>boot net:dhcp - install</tt></pre><p>The following output from the boot sequence is displayed:</p><pre>{3} ok boot net:dhcp - install

...
OpenBoot 4.23.4, 8184 MB memory available, Serial #69329298.
Ethernet address 0:14:4f:21:e1:92, Host ID: 8421e192.

Rebooting with command: boot net:dhcp - install
Boot device: /pci@7c0/pci@0/network@4:dhcp  File and args: 
1000 Mbps FDX Link up
1000 Mbps FDX Link up
&lt;time unavailable> wanboot info: WAN boot messages->console
&lt;time unavailable> wanboot info: Starting DHCP configuration
&lt;time unavailable> wanboot info: DHCP configuration succeeded
&lt;time unavailable> wanboot progress: wanbootfs: Read 366 of 366 kB (100%)
&lt;time unavailable> wanboot info: wanbootfs: Download complete
Tue Aug  5 17:12:09 wanboot progress: miniroot: Read 165251 of 165251 kB (100%)
Tue Aug  5 17:12:09 wanboot info: miniroot: Download complete
OpenSolarisOS Release 5.11 Version snv_111 64-bit
...
Hostname: opensolaris
Remounting root read/write
Probing for device nodes ...
Preparing automated install image for use
Downloading solaris.zlib archive
--11:09:11--  http://10.6.35.226:5555//export/home \
/images/osol-1003-ai-sparc//solaris.zlib
           => `/tmp/solaris.zlib'
Connecting to 10.6.35.226:5555... connected.
HTTP request sent, awaiting response... 200 OK
Length: 82,679,296 (79M) [text/plain]

100%[====================================>] 82,679,296    33.39M/s             

11:09:13 (33.36 MB/s) - `/tmp/solaris.zlib' saved [82679296/82679296]

Downloading solarismisc.zlib archive
--11:09:13--  http://10.6.35.226:5555//export/home/images \
/osol-1003-ai-sparc//solarismisc.zlib
           => `/tmp/solarismisc.zlib'
Connecting to 10.6.35.226:5555... connected.
HTTP request sent, awaiting response... 200 OK
Length: 620,032 (606K) [text/plain]

100%[====================================>] 620,032       --.--K/s             

11:09:13 (36.48 MB/s) - `/tmp/solarismisc.zlib' saved [620032/620032]

--11:09:13--  http://10.6.35.226:5555//export/home/images/ \
osol-1003-ai-sparc//install.conf
           => `/tmp/install.conf'
Connecting to 10.6.35.226:5555... connected.
HTTP request sent, awaiting response... 200 OK
Length: 39 [text/plain]

100%[====================================>] 39            --.--K/s             

11:09:13 (953.58 KB/s) - `/tmp/install.conf' saved [39/39]

Done mounting automated install image
Configuring devices.
Reading ZFS config: done.

Automated Installation started
The progress of the Automated Installation can be followed by 
viewing the logfile at /tmp/install_log</pre>

<a name="sparcerr"></a><h4>SPARC Network Booting Errors and Possible Causes</h4>
<p>This section describes errors or problems you might see when booting a 
SPARC client over the network and possible causes:</p><p><a href="#timeout">1. Timed out Waiting for BOOTP/DHCP Reply</a></p><p><a href="#load">2. Boot Load Failed</a></p><p><a href="#alert">3. Internal Server Error or WAN Boot Alert</a></p><p><a href="#forbid">4. Error Message 403: Forbidden or 404 Not Found</a></p><p><a href="#disabled">5. Auto-installer Disabled</a></p>

<a name="timeout"></a><h5>1. Timed out Waiting for BOOTP/DHCP Reply</h5>
<p>If a DHCP server is not responding to a SPARC client's request,
the following messages display:</p><pre>   ...
   OpenBoot 4.23.4, 8184 MB memory available, Serial #69329298.
   Ethernet address 0:14:4f:21:e1:92, Host ID: 8421e192.
   Rebooting with command: boot net:dhcp - install
   Boot device: /pci@7c0/pci@0/network@4:dhcp  File and args: 
   1000 Mbps FDX Link up
   Timed out waiting for BOOTP/DHCP reply
   Timed out waiting for BOOTP/DHCP reply
   Timed out waiting for BOOTP/DHCP reply
   Timed out waiting for BOOTP/DHCP reply</pre><p>The timeout message indicates that the client is sending a DHCP request, and
no response has been made to that request. This error is probably
caused by a DHCP configuration problem. Check whether your client is configured correctly in
the DHCP server.</p>

<a name="load"></a><h5>2. Boot Load Failed</h5>
<p>If the AI client starts downloading the <tt>boot_archive</tt>, but then fails with
the error, &ldquo;Boot load failed,&rdquo; that indicates that the client DHCP information is
configured incorrectly.</p><pre>Rebooting with command: boot net:dhcp - install
   Boot device: /pci@7c0/pci@0/network@4:dhcp  File and args: 
   1000 Mbps FDX Link up
   HTTP: Bad Response: 500 Internal Server Error
   Evaluating: 

   Boot load failed</pre><p>This error could happen if another DHCP server is responding to the client.
Check the DHCP configuration for this client. If the configuration appears to be
correct, determine whether there is another DHCP server in the subnet. If you
are running the Solaris DHCP server, you can run the DHCP daemon in
debug mode with the command:</p><pre># <tt>/usr/lib/inet/in.dhcpd <tt>-dv</tt></tt></pre>

<a name="alert"></a><h5>3. Internal Server Error or WAN Boot Alert</h5>
<p>After the AI client has obtained the IP address and initial parameters to
start downloading the boot archive, the client might be unable to find or
download the <tt>boot_archive</tt>.</p>
<ul><li><p>If the client cannot find the <tt>boot_archive</tt>, the following error is displayed:</p><pre>Rebooting with command: boot net:dhcp - install
      Boot device: /pci@7c0/pci@0/network@4:dhcp  File and args: 
      1000 Mbps FDX Link up
      &lt;time unavailable> wanboot info: WAN boot messages->console
      &lt;time unavailable> wanboot info: Starting DHCP configuration
      &lt;time unavailable> wanboot info: DHCP configuration succeeded
      &lt;time unavailable> wanboot progress: wanbootfs: Read 366 of 366 kB (100%)
      &lt;time unavailable> wanboot info: wanbootfs: Download complete
      Tue Aug  5 20:46:43 wanboot alert: miniinfo: Request returned code 500
      Tue Aug  5 20:46:44 wanboot alert: Internal Server Error \
(root filesystem image missing)</pre></li>
<li><p>If the AI client finds the <tt>boot_archive</tt> file but cannot access the file, then the following error is displayed:</p><pre>Rebooting with command: boot net:dhcp - install
      Boot device: /pci@7c0/pci@0/network@4:dhcp  File and args: 
      1000 Mbps FDX Link up
      &lt;time unavailable> wanboot info: WAN boot messages->console
      &lt;time unavailable> wanboot info: Starting DHCP configuration
      &lt;time unavailable> wanboot info: DHCP configuration succeeded
      &lt;time unavailable> wanboot progress: wanbootfs: Read 366 of 366 kB (100%)
      &lt;time unavailable> wanboot info: wanbootfs: Download complete
      Tue Aug  5 20:53:02 wanboot alert: miniroot: Request returned code 403
      Tue Aug  5 20:53:03 wanboot alert: Forbidden</pre></li></ul>
<p>For both of these problems, fix the <tt>boot_archive</tt> file configured for this client.
Check the path name and permissions of the <tt>boot_archive</tt> at <tt>$IMAGE/boot/boot_archive</tt>.</p>

<a name="forbid"></a><h5>4. Error Message 403: Forbidden or 404 Not Found</h5>
<p>These messages, &ldquo;ERROR 403: Forbidden&rdquo; and &ldquo;ERROR 404: Not Found&rdquo; can be seen
if the AI client successfully downloads the <tt>boot_archive</tt> and boots the OpenSolaris kernel,
but fails to get one of the image archives. An error message is
displayed indicating which file is causing the problem. For example, in the following
output, the <tt>solaris.zlib</tt> file does not exist or is not accessible at
the specified location.</p><pre>Rebooting with command: boot net:dhcp - install
   Boot device: /pci@7c0/pci@0/network@4:dhcp  File and args: 
   1000 Mbps FDX Link up
   1000 Mbps FDX Link up
   &lt;time unavailable> wanboot info: WAN boot messages->console
   &lt;time unavailable> wanboot info: Starting DHCP configuration
   &lt;time unavailable> wanboot info: DHCP configuration succeeded
   &lt;time unavailable> wanboot progress: wanbootfs: Read 366 of 366 kB (100%)
   &lt;time unavailable> wanboot info: wanbootfs: Download complete
   Tue Aug  5 21:43:37 wanboot progress: miniroot: Read 165251 of 165251 kB (100%)
   Tue Aug  5 21:43:38 wanboot info: miniroot: Download complete
   OpenSolarisOS Release 5.11 Version snv_111 64-bit
   ...
   Hostname: opensolaris
   Remounting root read/write
   Probing for device nodes ...
   Preparing automated install image for use
   Downloading solaris.zlib archive
   --15:40:37--  http://10.6.35.226:5555//export/home/images/ai_sparc_111/solaris.zlib
           => `/tmp/solaris.zlib'
   Connecting to 10.6.35.226:5555... connected.
   HTTP request sent, awaiting response... 403 Forbidden
   15:40:37 ERROR 403: Forbidden.

   FAILED
   Requesting System Maintenance Mode
   (See /lib/svc/share/README for more information.)
   Console login service(s) cannot run</pre><p>This problem can be caused by one of the following conditions:</p>
<ul><li><p>The image path configured in WAN boot is not correct.</p></li>
<li><p>The image path does not exist or is incomplete.</p></li>
<li><p>Access is denied due to permission issues.</p></li></ul>
<p>Check your DHCP configuration or the contents of the target directory you specified
when you ran <tt>installadm create-service</tt>. Check your WAN boot configuration.</p>

<a name="disabled"></a><h5>5. Auto-installer Disabled</h5>
<p>When installing the OpenSolaris 2010.03 release on your client system, you need to
include the <tt>install</tt> argument when you boot, as follows, in order to initiate
an installation.</p><pre>OK <tt>boot net:dhcp - install</tt></pre><p>If you've booted without the <tt>install</tt> boot argument, the SPARC client boots into
the automated installer boot image, but the installation does not start.  The
following message is displayed.</p><pre>Auto-installer disabled. Enable the auto-installer service
by running the following command:
svcadm enable svc:/application/auto-installer:default</pre><p>You should reboot your system, using the <tt>install</tt> argument in the boot command.</p>
<hr><p><b>Note - </b>To boot from AI media, use the following command:</p><pre>OK <tt>boot cdrom - install</tt></pre>
<hr>

<hr><p><b>Caution - </b>If you are installing using an OpenSolaris 2009.06 AI ISO image, use the
booting instructions for the prior OpenSolaris releases. See FAQ #11 at <a href="http://dlc.sun.com/osol/docs/content/2009.06/AIinstall/faq.html">http://dlc.sun.com/osol/docs/content/2009.06/AIinstall/faq.html</a>.</p>
<hr>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="clientreq.html">Previous</a>
             </td>
             <td align="right">
                 <a href="x86client.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

