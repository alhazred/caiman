<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">

<!--     -->
<head>
<!-- GenHTML revision 23224-->
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Frequently Asked Questions - OpenSolaris 2010.03 Automated Installer Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2010-03-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/opensol.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.com"><img border="0" src="graphics/opensolaris_logo_trans.png"></img></a>
   </div>
   <div class="Title">OpenSolaris 2010.03 Automated Installer Guide</div>
</div>
<div class="headerbar"></div>


<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="setupfaq.html">Previous</a>
             </td>
             <td align="right">
                 <a href="help.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="index.html">1.&nbsp;&nbsp;What's New For Automated Installations</a></p>
<p class="toc level1 tocsp"><a href="intro.html">2.&nbsp;&nbsp;Introduction to the Automated Installer</a></p>
<p class="toc level1 tocsp"><a href="tasks.html">3.&nbsp;&nbsp;Automated Installer Task Map</a></p>
<p class="toc level1 tocsp"><a href="bootable.html">4.&nbsp;&nbsp;Automated Installations Using Media</a></p>
<p class="toc level1 tocsp"><a href="setup.html">5.&nbsp;&nbsp;Automated Installer Setup Instructions</a></p>
<p class="toc level1 tocsp"><a href="administer.html">6.&nbsp;&nbsp;How to Administer an Automated Install Server</a></p>
<p class="toc level1 tocsp"><a href="client.html">7.&nbsp;&nbsp;How to Administer a Custom Install Client</a></p>
<p class="toc level1 tocsp"><a href="manifest.html">8.&nbsp;&nbsp;How to Administer the Manifest Files for an Install Service</a></p>
<p class="toc level1 tocsp"><a href="clients.html">9.&nbsp;&nbsp;How to Manage Client Installations</a></p>
<p class="toc level1 tocsp"><a href="trouble.html">10.&nbsp;&nbsp;Troubleshooting and FAQs for the Automated Installer</a></p>
<p class="toc level2"><a href="setupfaq.html">Troubleshooting Issues</a></p>
<div id="scrolltoc" class="onpage">
<p class="toc level2"><a href="">Frequently Asked Questions</a></p>
</div>
<p class="toc level2"><a href="help.html">Additional Resources</a></p>
<p class="toc level1 tocsp"><a href="appendix.html">11.&nbsp;&nbsp;Appendix</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="faq"></a><h3>Frequently Asked Questions</h3>


<a name="switch"></a><h4>1. How Do I Switch to a Static IP System if I Do Not Have Access to the System's Desktop?</h4>
<p>The following steps can be used to configure a wired network interface to
have a static IP address.</p>
<ol><li><p>Run the following series of commands:</p><pre># <tt>svcadm disable <i>network/physical:nwam</i></tt>
# <tt>svcadm enable <i>network/physical:default</i></tt>
# <tt>echo <i>&lt;IP_addr> > /etc/hostname.&lt;ifname></i></tt>
# <tt>echo <i>&lt;hostname> > /etc/nodename</i></tt></pre></li>
<li><p>Run the following command:</p><pre># <tt>vi <i>/etc/hosts</i></tt></pre><p>And, append this line to the file:</p><pre><tt>&lt;IP_addr> &lt;hostname> &lt;hostname>.local loghost</tt></pre><p>Then, edit the entries for the loopback addresses, so that these entries contain only 'localhost' as the alias. In other words, edit the line for the '::1' entry to show the following:</p><pre>::1 localhost</pre><p>And, edit the line for the <tt>127.0.0.1</tt> entry to show the following:</p><pre>127.0.0.1 localhost</pre></li>
<li><p>Run the following command:</p><pre># <tt>vi <i>/etc/netmasks</i></tt></pre><p>And, append this line to the file:</p><pre><tt>&lt;network> &lt;netmask></tt></pre></li>
<li><p>Run the following commands:</p><pre># <tt>ifconfig <i>&lt;ifname> plumb</i></tt>
# <tt>ifconfig <i>&lt;ifname> &lt;IP_addr> netmask &lt;netmask> up</i></tt></pre></li>
<li><p>If you use DNS to resolve hostnames, perform these additional steps:</p>
<ol><li><p>Configure the file, <tt>/etc/resolv.conf(4)</tt>, to work with the DNS servers for your network. You may need to consult your network administrator for this information.</p><p>An example of the <tt>/etc/resolv.conf</tt> file may look like this:</p><pre>domain mycompany.com
       nameserver 192.168.1.118
       nameserver 192.168.2.220 </pre></li>
<li><p>Run the following command:</p><pre># <tt>cp <i>/etc/nsswitch.dns</i> <i>/etc/nsswitch.conf</i></tt></pre></li></ol>
</li>
<li><p>Configure a default route:</p><p>If your network does not have a discoverable default router, you need to set a static default route on your system. You may need to consult your network administrator for this information. </p><p>To set up a static default route, add your network's default router IP address to the <tt>/etc/defaultrouter(4)</tt> file as shown in the following commands:</p><pre># <tt>echo <i>&lt;default_route_IP_addr> >> /etc/defaultrouter</i></tt>
# <tt>route add <i>default &lt;default_route_IP_addr></i></tt></pre></li></ol>


<a name="wanboot"></a><h4>2. Does My SPARC Client Support WAN Boot?</h4>
<p>The automated installer requires WAN boot support for SPARC clients. You can check
whether your client open boot prompt supports WAN boot by checking if <tt>network-boot-arguments</tt>
is a valid variable that can be set in the <tt>eeprom</tt>. If the
variable <tt>network-boot-arguments</tt> is displayed, or if it returns the output <tt>network-boot-arguments: data not available</tt>, the
open boot prompt supports WAN boot installations.</p><pre># <tt>eeprom | grep <i>network-boot-arguments</i></tt>
network-boot-arguments: data not available</pre><p>If the command results in no output, then WAN Boot is not
supported.</p>

<a name="image"></a><h4>3. Where Do I Find the AI ISO Image That I Need?</h4>
<p>Download an AI ISO image for x86 clients or for SPARC clients
from <a href="http://www.opensolaris.com/get/">http://www.opensolaris.com/get/</a>. The automated installer will use this AI ISO image to install
the OpenSolaris OS to your client systems.</p><p>Store the AI ISO image on your local file system. For example,
store the image at <tt>/export/aiimages/osol-0906-ai-x86.iso</tt>. </p>

<a name="modifymanifest"></a><h4>4. How Do I Modify the Manifest File to Point to the Repository of My Choice?</h4>
<p>You can modify the following default repository information in the manifest file:</p><pre>&lt;ai_pkg_repo_default_publisher>
     &lt;main url="http://pkg.opensolaris.org" publisher="opensolaris.org"/>
&lt;/ai_pkg_repo_default_publisher></pre><p>If your IPS repository is <tt>pkg.mycompany.com</tt> and the publisher name is <tt>mycompany.com</tt>, change
<tt>pkg.opensolaris.org</tt> to <tt>pkg.mycompany.com</tt> and <tt>opensolaris.org</tt> to <tt>mycompany.com</tt>.</p><pre>&lt;ai_pkg_repo_default_publisher>
     &lt;main url="http://pkg.mycompany.com" publisher="mycompany.com"/>
&lt;/ai_pkg_repo_default_publisher></pre>

<a name="match"></a><h4>5. How Do I Install a Particular OpenSolaris Development Build?</h4>
<p>Development builds of the OpenSolaris operating system are available in-between releases. See <a href="http://www.opensolaris.org/os/downloads/">http://www.opensolaris.org/os/downloads/</a>.</p><p>The build number or release of the AI ISO image that you
specify in the <tt>installadm create-service</tt> command with the <tt>-s</tt> option must be the same
build number or release of the OpenSolaris operating system that you specify in
the AI manifest.</p><p>Check the build number or release for the AI ISO image when
you download the image.</p><p>In the AI manifest, if you want to install a specific version
of the OpenSolaris OS, you can specify the version in the package <tt>entire</tt>.
The IPS repositories include the full FMRI for each version of a
package. Use the FMRI string to specify a specific version of the package,
<tt>entire</tt>, in the AI manifest. Use the following form:</p><pre>&lt;pkg_name="entire@0.5.11-0.build#/></pre><p>The following example specifies that OpenSolaris build 111 be installed to the client.</p><pre>&lt;ai_manifest name=&quot;ai_packages&quot;>
...
     &lt;ai_install_packages>
         &lt;pkg name="entire@0.5.11-0.111"/>
         &lt;pkg name="SUNWcsd"/>
         &lt;pkg name="SUNWcs"/>
         &lt;pkg name="babel_install"/>
         &lt;pkg name="openoffice"/>
         &lt;pkg name="SUNWTcl"/>
     &lt;/ai_install_packages>
     &lt;ai_uninstall_packages>
         &lt;pkg name="babel_install"/>
         &lt;pkg name="slim_install"/>
     &lt;/ai_uninstall_packages>
...
&lt;/ai_manifest></pre>

<a name="pool"></a><h4>6. How Do I Locate the Default AI Manifest Provided with an Install Service?</h4>
<p>The default AI manifest for each install service is called <tt>default.xml</tt>. This
file is located in the AI image associated with each install service at
the location <tt>&lt;imagepath>/auto_install/default.xml</tt>, where <tt>&lt;imagepath></tt> is the image path directory that was used
during the creation of the install service.</p><p>For example, if you are looking for the default manifest provided with the
install service, <tt>201003sparc</tt>, you can use the following command to locate this file:</p><pre># installadm list -n 201003sparc

      Service Name Status       Arch    Port  Image Path
      ------------ ------       ----    ----  ----------
      201003sparc  on           sparc   45603 /export/images/201003sparc</pre><p>In the above example output, the default manifest provided with this service can
be found at <tt>/export/images/201003sparc/auto_install/default.xml</tt>.</p>
<hr><p><b>Note - </b>Do not modify the default AI manifest file. You can, however, copy this
file and create a new default manifest for an install service. For instructions,
see <a href="customai.html#changeai">Replacing Default AI Manifest with a Custom Manifest</a>.</p>
<hr>


<a name="cleanup"></a><h4>7. How Can I Cleanup a Failed Service?</h4>
<p>If <tt>installadm create-service</tt> fails to create an install service, use the following procedures to
clean up.</p>
<ol><li><p>Run <tt>installadm delete-service</tt> to remove the failed install service:</p><pre># <tt>installadm delete-service [<tt>-x</tt>] <i>svcname</i></tt></pre></li>
<li><p>If that command fails with the following message:</p><pre>The specified service does not exist: &lt;svcname></pre><p>Try the following procedure:</p>
<ol><li><p>Check if the automated installer webserver had been started for the service.</p><p>First, search for the port number used for the webserver by finding the <tt>dns-sd</tt> process associated with webserver. An example of how to do this search by using the <tt>ps(1)</tt> command, and the resulting output, is as follows:</p><pre># <tt>ps -ef | grep dns-sd | grep " svc2 "</tt> \
<tt>root 11216 1 0 Apr 15 pts/2 0:00</tt> \
<tt>/usr/bin/dns-sd -R svc2 _OSInstall._tcp local</tt> \
<tt>46502 aiwebserver=192.168.2.1</tt></pre></li>
<li><p>Kill this process, as in this example:</p><pre># <tt>kill <tt>-9</tt> <i>11216</i></tt></pre><p>The example output shows that the webserver for the service, <tt>svc2</tt>, is being served off of port 46502.</p></li>
<li><p>Now search for the webserver process that's associated with this port number, and kill that process. See the following example:</p><pre><tt># ps -ef | grep installadm/webserver | grep 46502</tt> \
<tt>root 11026 1 1 Apr 15 pts/2 71:35</tt> \
<tt>/usr/bin/python2.4</tt> \
<tt>/usr/lib/installadm/webserver -p 46502 /var/ai/46502</tt>
<tt># kill -9 11026</tt></pre></li>
<li><p>Now, remove the data directory for the install service, which also has that port number found above, 46502, in its path:</p><pre># <tt>rm <tt>-rf</tt> <i>/var/ai/46502</i></tt></pre></li></ol>
</li>
<li><p>If you want to delete the target image path directory that was specified for the failed install service, remove the <tt>&lt;targetdir></tt> that you use in the <tt>installadm create-service</tt> command:</p><pre># <tt>rm <tt>-rf</tt> <i>targetdir</i></tt></pre></li></ol>
<p>As a further step, see <a href="#unconf">8. How Do I Cleanup DHCP Configurations for a SPARC Install Service?</a></p>

<a name="unconf"></a><h4>8. How Do I Cleanup DHCP Configurations for a SPARC Install Service?</h4>
<p>When you run the <tt>installadm create-service</tt> command with the <tt>-i</tt> and <tt>-c</tt> options, the
DHCP server is configured . To cleanup the DHCP configurations for a failed
or deleted SPARC install service, log into the DHCP Manager and manually remove
the DHCP macros for the install service. And, remove any IP addresses that
were configured when you created the install service.</p><p>For more information, see the <tt>dhcpmgr(1M)</tt> man page.</p>

<a name="verbose"></a><h4>9. How Do I Run Automated Installations in Debug Verbose Mode?</h4>
<p>You can run the installer in verbose debug mode, in order to
capture more information about the installation in the <tt>install_log</tt> file.</p><p><b>For SPARC systems</b>, boot the system with the <tt>install_debug</tt> boot argument as follows:</p><p>For network installations:</p><pre>ok> boot net:dhcp - install install_debug </pre><p>For installations using media:</p><pre>ok> boot cdrom - install install_debug</pre><p><b>For x86 systems</b>, edit the GRUB menu and add the <tt>install_debug=enable</tt> as a boot property
to the kernel line of the entry you wish to boot. For example,
</p><pre>kernel$ ... -B install_media=...,install_debug=enable</pre><p>Alternatively for x86 systems, you can preset debug mode on the AI
server by using the <tt>-b &lt;property=value></tt> option with the <tt>installadm create-service</tt> and <tt>installadm create-client</tt> commands. This
option presets that boot property in the GRUB menu for that service or
client.  For example,</p><pre>installadm create-client -e &lt;mac> -n &lt;svc> -b install_debug=enable</pre>

<a name="remote"></a><h4>10. How Do I Enable Remote Access to an AI Client by Using <tt>ssh</tt>?</h4>
<p>You can enable network access to an automated install client by using
<tt>ssh</tt>. You can use this access to remotely observe an installation process.</p><p>Enable this access by setting the option, <tt>livessh</tt>, to <tt>enable</tt> in the
installation configuration file. When this access is enabled, you can log in to
the AI client by using the username and password, &ldquo;jack/jack&rdquo;.</p>
<ul><li><p>For x86 systems, the <tt>menu.lst</tt> configuration file is created in the <tt>/tftpboot/</tt> directory with one of the following filename formats:</p>
<ul><li><p>If you used the <tt>installadm create-service -n &lt;service_name></tt> command, the filename is <tt>menu.lst.&lt;service_name></tt>.</p></li>
<li><p>If you used the <tt>installadm create-client -e &lt;mac></tt> command, the filename is <tt>menu.lst.01&lt;mac></tt>.</p></li></ul>
<p>In this file, the options are provided as kernel parameters, such as the following:</p><pre><tt>kernel$ ... -B install_media=...,livessh=enable,install_debug=enable</tt></pre><p>The <tt>livessh</tt> option is this excerpt is set to <tt>enable</tt>.</p></li>
<li><p>For SPARC systems, the <tt>install.conf</tt> file is populated in the <tt>ai_image_dest</tt> directory when an install service is created by using an <tt>installadm create-service</tt> command such as the following:</p><pre># installadm create-service [-n &lt;service_name>] [-s &lt;ai_iso_image>] &lt;ai_image_dest></pre><p>In the <tt>install.conf</tt> file, the options are defined as name-value pairs, such as:</p><pre>$ <tt>cat <i>&lt;ai_image_dest>/install.conf</i></tt>
...
<tt><i>livessh=enable</i></tt>
...</pre><p>The <tt>livessh</tt> option is this excerpt is set to <tt>enable</tt>.</p></li></ul>


<a name="boot1"></a><h4>11. How Do I Boot the Install Environment Without Starting an Installation?</h4>

<hr><p><b>Caution - </b>The booting procedures changed for the OpenSolaris 2010.03 release. To view the booting
instructions for the prior OpenSolaris releases, see FAQ #11 at <a href="http://dlc.sun.com/osol/docs/content/2009.06/AIinstall/faq.html">http://dlc.sun.com/osol/docs/content/2009.06/AIinstall/faq.html</a>.</p>
<hr>
<p>To boot the install environment without starting an installation, boot without specifying the
<tt>install</tt> flag as a boot argument as follows.</p>
<ul><li><p>For a SPARC system, boot using the following command:</p><pre>OK <tt>boot net:dhcp</tt></pre><p>Since you did not include the <tt>install</tt> argument in the command, the automated installation will not start.</p></li>
<li><p>For an x86 system, boot using one the following options:</p>
<ul><li><p>If you are booting an x86 system over the network, select the first entry in the GRUB menu to boot into the install environment without starting the installation.</p>
<hr><p><b>Note - </b>To ensure the system boots without starting the installation, make sure the entry you choose to boot does not have the <tt>install=true</tt> boot property specified in its kernel line.</p>
<hr>
</li>
<li><p>If you are booting an x86 system by using media, edit the GRUB menu and remove the <tt>install=true</tt> boot property from kernel line of the entry you wish to boot.</p></li></ul>
</li></ul>
<p>See the following related information:</p><p><a href="#verbose">9. How Do I Run Automated Installations in Debug Verbose Mode?</a></p><p>SPARC Error: <a href="sparcclient.html#disabled">6. Auto-installer Disabled</a></p><p>x86 Error: <a href="x86client.html#disabledx">5. Auto-installer Disabled</a></p>

<a name="encrypt"></a><h4>12. How Do I Generate Encrypted Passwords?</h4>
<p>One method of generating encrypted passwords for the OpenSolaris OS is to create
a user of the intended name and password on the OpenSolaris OS, copy
the password from the <tt>/etc/shadow</tt> file between the 1st and 2nd colons of
the user's record, and add that information into the 'userpass' or 'rootpass' values
in the SC manifest.</p><p>See <a href="customsc.html">How to Create Custom SC Manifest Files</a>.</p>

<a name="back"></a><h4>13. Is the Automated Installer Backwards Compatible?</h4>
<p>If the OpenSolaris 2010.03 release is installed on your install server, you can
use AI images for either the OpenSolaris 2009.06 release or for the OpenSolaris
2010.03 release. Otherwise, the OpenSolaris release installed on your server and the OpenSolaris
release for the AI images that you plan to install to client systems
must be the same release.</p>

<a name="targetdisk"></a><h4>14. How is the Default Target Disk Selected?</h4>
<p>You can use the <tt>&lt;ai_target_device></tt> tag to specify a particular target disk on
which to install the OpenSolaris OS. See <a href="customai.html#iediskrepo">Defining a Target for the Installation</a>. If you do not
specify a target disk, the automated installer chooses a default target for installing
the OpenSolaris OS.</p><p>The default target disk is selected as follows:</p>
<ol><li><p>The installer gets the recommended size for installing the OpenSolaris OS from the AI libraries. Currently, the recommended size is 13 GB.</p></li>
<li><p>The installer searches for available disks on the client.</p></li>
<li><p>When the first disk is found, the installer checks the size of that disk.</p>
<ul><li><p>If the size is greater than or equal to the recommended size, the installer selects the disk and returns to the installation procedure.</p></li>
<li><p>If the size is less than the recommended size, the installer goes to the next disk to check the size.</p></li></ul>
</li>
<li><p>If there is no match, the automated installation fails.</p></li></ol>


<a name="howstart"></a><h4>15. Once I've Booted Into the Install Environment, How Do I Start the Automated Installation?</h4>

<ol><li><p>Login as root.</p></li>
<li><p>Place a copy of the manifest you want to use at /tmp/ai_combined_manifest.xml. You could copy the default manifest on the media, as shown in these sample commands.</p><pre># cp   /usr/share/auto_install/default.xml /tmp/ai_combined_manifest.xml</pre><pre># vi   /tmp/ai_combined_manifest.xml</pre></li>
<li><p>Enable the auto-installer service by running the following command: </p><pre>scvadm enable auto-installer:default</pre></li></ol>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="setupfaq.html">Previous</a>
             </td>
             <td align="right">
                 <a href="help.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

